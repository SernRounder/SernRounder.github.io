---
title: 怎么用C++读写文件
date: 2019-01-08 16:29:11
tags:
- C++
categories: 学习笔记
---
# 前言
最近在c++课设中遇到了c++读写文件的问题，正好记录一下学到的fstream的用法。
<!--more-->
# fstream
c++中使用fstream文件流来进行文件的读写，使用#include \<fstream>包含以后就可以使用fstream了。
如下定义了一个fstream对象f，并同时让f用二进制只读方式打开test.txt：
```C++
fstream f;
f.open("test.txt",ios::in|ios::binary);
```
其中test.txt是位于当前文件夹的文件，也可以使用绝对路径，只要是一个内容为文件路径的静态字符串就可以。
# fstream可用参数

参数名|说明
--|--
ios::in|读文件（硬盘→内存）
ios::out|写文件（内存→硬盘）
ios::ate|将初始位置放在文件结尾
ios::app|将写入的内容放在文件尾
ios::trunc|如果文件已存在，则先删除文件
ios::binary|用二进制方式完成以上操作

以上参数可以用"|"来连接，如前例就是使用二进制方式读文件

# fstream读写文件
使用open方法打开文件后就可以对文件进行读写了，可以像操作cin和cout那样用重载后的流提取和流插入运算符完成，但是使用这种方法会导致遇到空格就截断的情况。为了能够一次处理一整行数据，我们可以使用getline完成。
```C++
string s
getline(f,s);
```
这样就从f中读取了一行字符到了string类s中。
还有一种方法可以读取一整行，fstream对象提供了getline（）方法，上例也可以写成f.getline(s,200)这样就会在f中一直读取，直到一行结束或者达到200个字符为止。但是要注意这里的s就不能是一个string对象了，必须是一个字符指针。
至于fstream对象的写入则如下
```
f<<s;
```
就像使用cout的时候一样。

fstream有一个特性是在程序结束后会自动关闭流，保存更改到文件，不过最后最好在读写完毕后用f.close()来关闭这个流，不然在多次对文件的操作有可能被丢弃。
